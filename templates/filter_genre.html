<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        .mylabel {
            color: #3f5a36;
            font-weight: bold;
            display: block;
            width: 150px;
            float: left;
            }
    </style>
</head>
<body>


        <fieldset>

            <legend>Choose Your favorite Genre/s:</legend>
            {% for genre in all_genres %}
                <div class= "mylabel">
                    <input type="checkbox" name="{{ genre }}" value="{{ genre }}">
                    {{genre}}
                </div><br>
            {% endfor %}


<!--        <button type='button' onclick="showSelectedOptions()">-->
<!--            Show Selected Options-->
<!--        </button>-->
<!--        <button type="button" onclick="redirect()">-->
<!--            Show related Movies-->
<!--        </button>-->
         <button type='button' onclick="processOptions()">
        Process Options
        </button>


        <div id="selectedOptions"></div>
    </fieldset>
    <script>
        function processOptions() {
            // Get all checkboxes
            var checkboxes = document.querySelectorAll('input[type="checkbox"]');

            // Array to store selected options
            var selectedOptions = [];

            // Iterate through checkboxes and check if they are checked
            checkboxes.forEach(function (checkbox) {
                if (checkbox.checked) {
                    selectedOptions.push(checkbox.name);
                }
            });

            // Store selected options in localStorage
            localStorage.setItem('selectedOptions', JSON.stringify(selectedOptions));

            // Display selected options or redirect based on the context
            var selectedOptionsElement = document.getElementById('selectedOptions');
            if (selectedOptions.length == 0) {
                selectedOptionsElement.innerHTML = 'No options selected.';
            }

            // Redirect to the new page after a brief delay
            var queryString = selectedOptions.map(option => 'selectedGenres=' + encodeURIComponent(option)).join('&');
            var url = '/selected_genre?' + queryString;
            window.location.href = url;

        }


    </script>

</body>
</html>